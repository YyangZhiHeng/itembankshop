<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>后台管理员</title>
    <link rel="icon" href="images/admin-icon.png">
    <link rel="stylesheet" href="css/element.css">
    <link rel="stylesheet" href="css/admin.css">
</head>
<style>
</style>
<body>
<div id="app">
    <!--回到顶部-->
    <template>
        <el-backtop target=".page-component__scroll .el-scrollbar__wrap"></el-backtop>
    </template>
        <div class="header">
            <div>
                <img src="images/logo2.png" width="50px">
            </div>
            <div>
                <!--<h2>管理员页面</h2>-->
            </div>
            <div>
                <img src="images/logo1.png">
            </div>
        </div>
    <!--顶部导航-->
    <div class="lineAdmin">
        <el-menu
                :default-active="activeIndex2"
                class="el-menu-demo"
                mode="horizontal"
                @select="handleSelect"
                background-color="#545c64"
                text-color="#fff"
                active-text-color="#ffd04b">
            <el-menu-item index="1">处理中心</el-menu-item>
            <el-submenu index="2">
                <template slot="title">我的工作台</template>
                <el-menu-item index="2-1">选项1</el-menu-item>
                <el-menu-item index="2-2">选项2</el-menu-item>
                <el-menu-item index="2-3">选项3</el-menu-item>
                <el-submenu index="2-4">
                    <template slot="title">选项4</template>
                    <el-menu-item index="2-4-1">选项1</el-menu-item>
                    <el-menu-item index="2-4-2">选项2</el-menu-item>
                    <el-menu-item index="2-4-3">选项3</el-menu-item>
                </el-submenu>
            </el-submenu>
            <el-menu-item index="3" >消息中心</el-menu-item>
            <el-menu-item index="5"><a @click="returnLogin">退出</a></el-menu-item>
        </el-menu>
    </div>
            <!--修改账号密码-->
            <div class="main">
                <div class="left">
                    <!--//跳转admincustomer.html页面-->
                    <!--左边导航条-->
                    <el-menu
                            default-active="2"
                            class="el-menu-vertical-demo"
                            @open="handleOpen"
                            @close="handleClose"
                            background-color="#545c64"
                            text-color="#fff"
                            active-text-color="#ffd04b">
                        <el-submenu index="1">
                            <template slot="title">
                                <i class="el-icon-location"></i>
                                <span>用户导航</span>
                            </template>
                            <el-menu-item-group>
                                <template slot="title">普通用户</template>
                                <el-menu-item index="1-1">分组一</el-menu-item>
                                <el-menu-item index="1-2">分组二</el-menu-item>
                            </el-menu-item-group>
                            <el-menu-item-group title="VIP用户">
                                <el-menu-item index="1-3">分组一</el-menu-item>
                            </el-menu-item-group>
                            <el-submenu index="1-4">
                                <template slot="title">其他</template>
                                <el-menu-item index="1-4-1">分组</el-menu-item>
                            </el-submenu>
                        </el-submenu>
                        <el-menu-item index="2">
                            <i class="el-icon-menu"></i>
                            <span slot="title">导航二</span>
                        </el-menu-item>
                        <el-menu-item index="3" >
                            <i class="el-icon-document"></i>
                            <span slot="title">导航三</span>
                        </el-menu-item>
                        <el-menu-item index="4">
                            <i class="el-icon-setting"></i>
                            <span slot="title" @click="clickCustomer">管理用户</span>
                        </el-menu-item>
                    </el-menu>
                    <!--<el-button type="primary" @click="clickCustomer">管理用户</el-button>-->
                </div>
                <!--显示管理员账号密码-->
                <div class="zj">
                    <div class="zj-top">
                        <el-table :data="tableDate"  class="index" style="width: 600px">
                            <el-table-column prop="" label="头像" width="80" size="small">
                                <template slot-scope="scope">
                                    <el-button type="primary" icon="el-icon-user-solid" circle size="small" align="center"></el-button>
                                </template>
                            </el-table-column>
                            <el-table-column prop="id" label="编号" ></el-table-column>
                            <el-table-column prop="username" label="姓名" ></el-table-column>
                            <el-table-column prop="password" label="密码"></el-table-column>
                            <el-table-column fixed="right" label="操作" align="center" width="180">
                                <template slot-scope="scope">
                                    <el-button type="success" size="small" @click="handleEdit(scope.row)" align="center">修改密码</el-button>
                                    <!--<el-button type="warning" size="small" @click="handleDelete(scope.row.id)">删除</el-button>-->
                                </template>
                            </el-table-column>
                        </el-table>
                    </div>
                    <!--图片轮播-->
                    <div class="zj-z" >
                        <template>
                            <el-carousel :interval="3000" type="card" height="200px">
                                <el-carousel-item v-for="item in  6" :key="item">
                                    <!--<h3 class="medium">{{ item }}</h3>-->
                                    </el-image>
                                </el-carousel-item>
                            </el-carousel>
                        </template>
                    </div>
                    <div class="zj-xia">

                    </div>
                </div>
                <div class="right">
                    <!--跳转admincomtent.html页面-->
                    <!--右边导航条-->
                    <el-menu
                            default-active="2"
                            class="el-menu-vertical-demo"
                            @open="handleOpen"
                            @close="handleClose"
                            background-color="#545c64"
                            text-color="#fff"
                            active-text-color="#ffd04b">
                        <el-submenu index="1">
                            <template slot="title">
                                <i class="el-icon-location"></i>
                                <span>商品导航</span>
                            </template>
                            <el-menu-item-group>
                                <template slot="title">试题</template>
                                <el-menu-item index="1-1">分组一</el-menu-item>
                                <el-menu-item index="1-2">分组二</el-menu-item>
                            </el-menu-item-group>
                            <el-menu-item-group title="特殊试题">
                                <el-menu-item index="1-3">分组一</el-menu-item>
                            </el-menu-item-group>
                            <el-submenu index="1-4">
                                <template slot="title">其他试题</template>
                                <el-menu-item index="1-4-1">分组</el-menu-item>
                            </el-submenu>
                        </el-submenu>
                        <el-menu-item index="2">
                            <i class="el-icon-menu"></i>
                            <span slot="title">导航二</span>
                        </el-menu-item>
                        <el-menu-item index="3" >
                            <i class="el-icon-document"></i>
                            <span slot="title">导航三</span>
                        </el-menu-item>
                        <el-menu-item index="4">
                            <i class="el-icon-setting"></i>
                            <span slot="title" @click="clickContent">试题管理</span>
                        </el-menu-item>
                    </el-menu>
                    <!--<el-button type="success" round @click="clickContent">管理试题</el-button>-->
                </div>
            </div>
    <div class="footer">
        <!--<p>关于"面经"面试网―合作伙伴﹐营销中心廉正举报﹒</p>-->
        <!--<p>联系客服开放平台―诚征英才﹐联系我们网站地图隐私权政策法律声明﹐</p>-->
        <!--<p>知识产权增值电信业务经营许可证:浙B2-20080224 增值电信业务经营许可证(跨地区)∶B2-20150210│浙网文(2019) 1033-086号│浙江</p>-->
        <el-link href="#" target="_blank">关于"面经"面试网</el-link>
        <el-link type="primary">服务条款</el-link>
        <el-link type="success">隐私政策</el-link>
        <el-link type="warning">客服中心</el-link>
        <el-link type="danger">联系我们</el-link>
        <el-link type="info">帮助中心</el-link>
    </div>
    <!--弹窗-->
    <el-dialog
            title="管理员信息"
            :visible.sync="dialogVisible"
            width="30%"
            :before-close="handleClose">
        <span></span>
        <el-form ref="form" :model="form" label-width="80px">
            <el-form-item label="密码">
                <el-input v-model="form.password"></el-input>
            </el-form-item>
        </el-form>
        <span slot="footer" class="dialog-footer">
    <el-button @click="dialogVisible = false">取 消</el-button>
    <el-button type="primary" @click="confirmForm">确 定</el-button>
  </span>
    </el-dialog>
</div>
<script src="js/vue.js"></script>
<script src="js/element.js"></script>
<script src="js/axios.min.js"></script>
<script >

    axios.default.baseURI="http://localhost:8080";
    let app = new  Vue({
        //ElementUI
        el: "#app",
        data:{
            tableDate:[],
            dialogVisible:false,//默认不显示
            form:{//表单实体
            },
        },
        methods:{
            //返回登入页面
            returnLogin(){
                axios.get("/loginOut")
                    .then(resp=>{
                        window.location.href="login.html";
                    })
                    .catch(err=>{
                        console.log(err)
                    })
            },
            handleClick(row) {
                console.log(row);
            },
            //跳转管理用户页面,
            clickCustomer(){
                window.location.href="admincustomer.html";
            },
            //跳转管理商品页面
            clickContent(){
                window.location.href="admincontent.html";
            },
            //修改密码
            handleEdit(row){
                console.log(row);
                //显示表单
                this.dialogVisible=true;
                //清空表单
                this.form ={
                    id:row.id,
                    // username:row.username,
                    password:row.password
                };
            },
            confirmForm(){
                axios.put("/updateAdminPsw",this.form)
                    .then(()=>{
                        //隐藏表单
                        this.dialogVisible=false;
                        //刷新页面
                        // location.reload();
                        this.$message({
                            showClose: true,
                            message: '修改成功',
                            type: 'success'
                        });
                    })
                    .catch(err=>{
                        this.$message({
                            showClose: true,
                            message: '修改失败',
                            type: 'error'
                        });
                        console.log(err)
                    })
                location.reload(timeout),2000;
            }
        },
        created () {
            //修改管理员密码

            // 查询管理员信息
            axios.post("/findAdminAll")
                .then(resp => {
                    this.tableDate = resp.data
                })
                .catch(err =>{
                })
        }
    })

</script>
</body>
</html>