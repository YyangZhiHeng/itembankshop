<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>试题管理</title>
    <link rel="icon" href="images/admin-problem-ico.png">
    <link rel="stylesheet" href="css/element.css">
    <link rel="stylesheet" href="css/admincontent.css">
</head>
<style>
</style>
<body>
<div id="app">
    <!--回到顶部-->
    <div class="header">
        <div>
            <img src="images/logo2.png" width="50px">
        </div>
        <div>
            <h2>管理试题页面</h2>
            <!--<el-button type="primary" round @click="handleAdd">新增试题</el-button>-->
        </div>
        <div>
            <img src="images/logo1.png">
        </div>
    </div>
    <div class="line">
        <el-menu
                :default-active="activeIndex2"
                class="el-menu-demo"
                mode="horizontal"
                @select="handleSelect"
                background-color="#545c64"
                text-color="#fff"
                active-text-color="#ffd04b">
            <el-menu-item index="1">处理中心</el-menu-item>
            <el-submenu index="2">
                <template slot="title">我的工作台</template>
                <el-menu-item index="2-1">选项1</el-menu-item>
                <el-menu-item index="2-2">选项2</el-menu-item>
                <el-menu-item index="2-3">选项3</el-menu-item>
                <el-submenu index="2-4">
                    <template slot="title">选项4</template>
                    <el-menu-item index="2-4-1">选项1</el-menu-item>
                    <el-menu-item index="2-4-2">选项2</el-menu-item>
                    <el-menu-item index="2-4-3">选项3</el-menu-item>
                </el-submenu>
            </el-submenu>
            <el-menu-item index="3" >消息中心</el-menu-item>
            <el-menu-item index="4"><a href="https://www.baidu.com" target="_blank">商品管理</a></el-menu-item>
            <el-menu-item index="5" @click="comeLogin">退出</el-menu-item>

        </el-menu>
    </div>
    <div class="main">
        <div class="zj-left">
            <!--左边导航-->
            <el-menu
                    default-active="2"
                    class="el-menu-vertical-demo"
                    @open="handleOpen"
                    background-color="#545c64"
                    text-color="#fff"
                    @close="handleClose">
                <el-submenu index="1">
                    <template slot="title">
                        <i class="el-icon-location"></i>
                        <span>试题分类菜单</span>
                    </template>
                    <el-menu-item-group>
                        <el-submenu index="1-1">
                            <template slot="title" >
                                <i class="el-icon-caret-bottom"></i>
                                Spring面试题</template>
                            <el-menu-item index="1-1-1">
                                <el-button icon="el-icon-search" circle @click="searchOne">选项1</el-button>
                            </el-menu-item>
                        </el-submenu>

                        <el-submenu index="1-2">
                            <template slot="title">
                                <i class="el-icon-caret-bottom"></i>
                                SpringBoot面试题</template>
                            <el-menu-item index="1-2-1">
                                <el-button icon="el-icon-search" circle @click="searchTwo">选项2</el-button>
                            </el-menu-item>
                        </el-submenu>

                        <el-submenu index="1-3">
                            <template slot="title">
                                <i class="el-icon-caret-bottom"></i>
                                mybatis，mybatis-plus面试题</template>
                            <el-menu-item index="1-3-1">
                                <el-button icon="el-icon-search" circle @click="searchThree">选项3</el-button>
                            </el-menu-item>
                        </el-submenu>

                        <el-submenu index="1-4">
                            <template slot="title">
                                <i class="el-icon-caret-bottom"></i>
                                JVM面试题</template>
                            <el-menu-item index="1-4-1">
                                <el-button icon="el-icon-search" circle @click="searchFour">选项4</el-button>
                            </el-menu-item>
                        </el-submenu>

                        <el-submenu index="1-5">
                            <template slot="title">
                                <i class="el-icon-caret-bottom"></i>
                                前端面试题</template>
                            <el-menu-item index="1-5-1">
                                <el-button icon="el-icon-search" circle @click="searchFive">选项5</el-button>
                            </el-menu-item>
                        </el-submenu>

                        <el-submenu index="1-6">
                            <template slot="title">
                                <i class="el-icon-caret-bottom"></i>
                                java面试题</template>
                            <el-menu-item index="1-6-1">
                                <el-button icon="el-icon-search" circle @click="searchSix">选项6</el-button>
                            </el-menu-item>
                        </el-submenu>

                        <el-submenu index="1-7">
                            <template slot="title">
                                <i class="el-icon-caret-bottom"></i>
                                服务器面试题</template>
                            <el-menu-item index="1-7-1">
                                <el-button icon="el-icon-search" circle @click="searchSeven">选项7</el-button>
                            </el-menu-item>
                        </el-submenu>

                        <el-submenu index="1-8">
                            <template slot="title">
                                <i class="el-icon-caret-bottom"></i>
                                数据库试题</template>
                            <el-menu-item index="1-8-1">
                                <el-button icon="el-icon-search" circle @click="searchEight">选项8</el-button>
                            </el-menu-item>
                        </el-submenu>
                </el-submenu>
                <el-menu-item index="2">
                    <i class="el-icon-menu"></i>
                    <span slot="title">导航二</span>
                </el-menu-item>
                <el-menu-item index="3" >
                    <i class="el-icon-document"></i>
                    <span slot="title" @click="handleAdd">新增试题</span>
                </el-menu-item>
                <el-menu-item index="4">
                    <i class="el-icon-caret-left"></i>
                    <span>
                        <a @click="comeBackAdmin">返回管理员</a>
                    </span>
                </el-menu-item>
            </el-menu>
        </div>
        <div class="zj">
            <div class="shang">
            </div>
            <div class="zj-zj">
                <el-table :data="tableDate" border style="width: 88%;height: 60%" class="index" align="center" >
                    <el-table-column  prop="id" label="题号" width="100" align="center"></el-table-column>
                    <el-table-column prop="content" label="内容" width="350" align="center"></el-table-column>
                    <el-table-column prop="name" label="类型" width="350" align="center"></el-table-column>
                    <el-table-column prop="code" label="code" width="100" align="center"></el-table-column>
                    <el-table-column prop="answer" label="答案" width="350" align="center"></el-table-column>
                    <el-table-column fixed="right" label="操作" align="center" width="180">
                        <template slot-scope="scope" class="index">
                            <el-button type="success" size="small" @click="handleEdit(scope.row)" align="center">修改</el-button>
                            <el-button type="warning" size="small" @click="handleDelete(scope.row.id)">删除</el-button>
                        </template>
                    </el-table-column>
                </el-table>
            </div>
            <center>
                <div class="xia">
                    <!--分页-->
                    <center>
                        <el-pagination
                                background
                                layout="prev, pager, next"
                                :total="total"
                                :current-page="current"
                                :page-size="size"
                                @current-change="handleCurrentChange">
                        </el-pagination>
                        <center />
                </div>
            </center>

        </div>
        <div class="zj-right">

        </div>
    <!--</div>-->
        <!--<div class="footer">-->
            <!--&lt;!&ndash;<p>关于"面经"面试网―合作伙伴﹐营销中心廉正举报﹒</p>&ndash;&gt;-->
            <!--&lt;!&ndash;<p>联系客服开放平台―诚征英才﹐联系我们网站地图隐私权政策法律声明﹐</p>&ndash;&gt;-->
            <!--&lt;!&ndash;<p>知识产权增值电信业务经营许可证:浙B2-20080224 增值电信业务经营许可证(跨地区)∶B2-20150210│浙网文(2019) 1033-086号│浙江</p>&ndash;&gt;-->
            <!--<el-link href="#" target="_blank">关于"面经"面试网</el-link>-->
            <!--<el-link type="primary">服务条款</el-link>-->
            <!--<el-link type="success">隐私政策</el-link>-->
            <!--<el-link type="warning">客服中心</el-link>-->
            <!--<el-link type="danger">联系我们</el-link>-->
            <!--<el-link type="info">帮助中心</el-link>-->
        <!--</div>-->
        <!--//弹窗-->
        <el-dialog
                title="试题信息"
                :visible.sync="dialogVisible"
                width="30%"
                :before-close="handleClose">
            <span></span>
            <el-form ref="form" :model="form" label-width="80px">
                <el-form-item label="试题类型">
                    <el-input v-model="form.name"></el-input>
                </el-form-item>
                <el-form-item label="试题内容">
                    <el-input v-model="form.content"></el-input>
                </el-form-item>
                <el-form-item label="code">
                    <el-input v-model="form.code"></el-input>
                </el-form-item>
                <el-form-item label="answer">
                    <el-input v-model="form.answer"></el-input>
                </el-form-item>
            </el-form>
            <span slot="footer" class="dialog-footer">
    <el-button @click="dialogVisible = false">取 消</el-button>
    <el-button type="primary" @click="confirmForm">确 定</el-button>
  </span>
        </el-dialog>
</div>
<script src="js/vue.js"></script>
<script src="js/element.js"></script>
<script src="js/axios.min.js"></script>
<script >
    axios.default.baseURI="http://localhost:8080";
    let app = new  Vue({
        el: "#app",
        data:{
            tableDate: [],
            total: 0, // 总条数
            current: 1, // 页码
            size: 6,
            dialogVisible:false,//默认不显示
            form:{//表单实体
            },
            isEdit:false,//新增false,修改true
        },
        methods:{
            //退出
            comeLogin(){
                axios.get("/loginOut")
                    .then(resp=>{
                        window.location.href="login.html";
                    })
                    .catch(err=>{
                        console.log(err)
                    })
            },
            comeBackAdmin(){
              location="admin.html"
            },
            // Spring面试题 1
            searchOne(){
                axios.post("/findContentOne")
                    .then(resp=>{
                        this.tableDate = resp.data
                    })
                    .catch(err=>{
                        console.log(err)
                    })
            },
            //SpringBoot面试题 2
            searchTwo(){
                axios.post("/findContentTwo")
                    .then(resp=>{
                        this.tableDate = resp.data
                    })
                    .catch(err=>{
                        console.log(err)
                    })
            },
            // mybatis，mybatis-plus面试题 3
            searchThree(){
                axios.post("/findContentThree")
                    .then(resp=>{
                        this.tableDate = resp.data
                    })
                    .catch(err=>{
                        console.log(err)
                    })
            },
            // JVM调优面试题 4
            searchFour(){
                axios.post("/findContentFour")
                    .then(resp=>{
                        this.tableDate = resp.data
                    })
                    .catch(err=>{
                        console.log(err)
                    })
            },
            //前端面试题 5
            searchFive(){
                axios.post("/findContentFive")
                    .then(resp=>{
                        this.tableDate = resp.data
                    })
                    .catch(err=>{
                        console.log(err)
                    })
            },
            //java面试题 6
            searchSix(){
                axios.post("/findContentSix")
                    .then(resp=>{
                        this.tableDate = resp.data
                    })
                    .catch(err=>{
                        console.log(err)
                    })
            },
            //服务器面试题 7
            searchSeven(){
                axios.post("/findContentSeven")
                    .then(resp=>{
                        this.tableDate = resp.data
                    })
                    .catch(err=>{
                        console.log(err)
                    })
            },
            //数据库面试题 8
            searchEight(){
                axios.post("/findContentEight")
                    .then(resp=>{
                        this.tableDate = resp.data
                    })
                    .catch(err=>{
                        console.log(err)
                    })
            },
            handleClick(row) {
                console.log(row);
            },
            handleCurrentChange(c){
                this.queryByPage(c, this.size);
            },
            queryByPage(current, size){
                axios.get("/findItBankAll", {
                    params:{
                        current: current,
                        size: size
                    }
                })
                    .then(resp => {
                        this.tableDate = resp.data.records;
                        this.total = resp.data.total;
                    })
                    .catch(err => {
                        console.log(err);
                        this.tableDate = []
                    })
            },
            //删除试题
            handleDelete(id){
                axios.delete("/deleteContentById/"+id)
                    .then(()=>{
                        this.$message({
                            showClose: true,
                            message: '删除成功',
                            type: 'success'
                        });
                        //刷新页面
                        // location.reload();
                    })
                    .catch(err =>{
                        this.$message({
                            showClose: true,
                            message: '删除失败',
                            type: 'error'
                        });
                        console.log(err)
                    })

            },
            //修改
            handleEdit(row){
                console.log(row);
                //显示表单
                this.dialogVisible=true;
                //清空表单
                this.form ={
                    id:row.id,
                    content:row.content,
                    code:row.code,
                    name:row.name,
                    answer:row.answer
                };
                //修改
                this.isEdit=true;
            },
            handleAdd(){
                //显示表单
                this.dialogVisible=true;
                //清空表单
                this.form={};
                //新增
                this.isEdit=false;
            },
            confirmForm(){
                //判断添加还是修改
                if (this.isEdit){//isEdit=true,修改
                    axios.put("/updateContent",this.form)
                        .then(()=>{
                            //隐藏表单
                            this.dialogVisible=false;
                            //刷新页面
                            // location.reload();
                            this.$message({
                                showClose: true,
                                message: '修改成功',
                                type: 'success'
                            });

                            // this.reload();
                        })
                        .catch(err=>{
                            this.$message({
                                showClose: true,
                                message: '修改失败',
                                type: 'error'
                            });
                            console.log(err)
                        })
                }else {//isEdit=false,添加
                    axios.post("/addContent",this.form)
                        .then(()=>{
                            //隐藏表单
                            this.dialogVisible=false;
                            this.$message({
                                showClose: true,
                                message: '添加成功',
                                type: 'success'
                            });
                            //刷新页面
                            // location.reload();
                            // this.reload();
                        })
                        .catch(err=>{
                            this.$message({
                                showClose: true,
                                message: '添加失败',
                                type: 'error'
                            });
                            console.log(err)
                        })
                }
            }
        },
        created () {
            axios.post("/findItBankAll")
                .then(resp => {
                    this.tableDate = resp.data
                })
                .catch(err =>{
                })
            this.queryByPage(1, this.size);
        }
    })

</script>
</body>
</html>